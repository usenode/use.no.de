<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
        <title><% this.pageTitle() %></title>
        
        <script type="text/javascript" src="/thirdparty/prettify/prettify.js"></script>
        <script type="text/javascript" src="/thirdparty/jquery-1.5.1.min.js"></script>
        <script type="text/javascript" src="/site.js"></script>
        
        : if (this.stylesheetPath) {
		    <link rel="stylesheet" type="text/css" href="<%= this.stylesheetPath %>" />
        : }

        <link rel="stylesheet" type="text/css" href="/thirdparty/prettify/prettify.css"/>
        <!--[if IE 6]>
        	: /* height works like min-height in IE6 */
        	<style>.content { height: 100%;}</style>
        <![endif]-->
        <% this.head() %>
    </head>
    <body class="<% this.bodyClass() %>">
		<% this.page() %>
    </body>
</html>

<~method navigation (cssClass, selected, items, opts) >
    : if (! opts) { opts = {}; }
    <ul<%
         if (cssClass) {
            %> class="<%= cssClass %>"<%
         }
    %>>
        : for (var i = 0, l = items.length; i < l; i++) {
            <li<%
             if (selected === items[i].id) {
                %> class="selected"<%
             }
            %>>
                <a href="<%= items[i].link %>"><%= items[i][ opts.textAttribute || 'text' ] %></a>
            </li>
        : }
    </ul>
</~method>

<~method bodyClass></~method>

<~method head></~method>
<~method pageTitle></~method>

<~method ribbon (path) ><% /*
    <div class="ribbon">
        <a href="http://github.com/<= path >" rel="me">Fork me on GitHub</a>
    </div>
*/
%></~method>

<~method copyright>
	<div class="copyright">
		Site developed by <a href="http://github.com/tomyan">Tom Yandell</a> &amp; <a href="http://www.twitter.com/richardhodgson">Richard Hodgson</a>.
	</div>
</~method>

<~method page>
	: var sectionTitle = (this.sectionTitle) ? this.sectionTitle : 'UseNode';
	: var sectionUrl   = (this.sectionTitle) ? this.sectionTitle.toLowerCase() : '';
	<div class="section-title">
	 <a href="/<%= sectionUrl %>"><%= sectionTitle %></a>
	</div>
	
	<div class="page">
		<div class="page-inner">
			<div class="column">
				<%
					 if (this.subNavItems) {
					 this.navigation('navigation local-navigation', this.subNavSelected, this.subNavItems);
				 }
				%>
			</div>
			<div class="column content">
				<% next(this) %>
			</div>
		</div>
	</div>
	
	<div class="site">
	 <div class="site-logo">
		 : if (this.mainNavSelected === 'home') {
			 <h1>use.no.de</h1>
		 : }
		 : else {
			 <a href="/">use.no.de</a>
		 : }
	 </div>
	
	 <%
		 this.navigation('global-navigation', this.mainNavSelected, [
			 { id: 'home',      link: '/',          text: 'Home' },
			 { id: 'proton',    link: '/proton',    text: 'Proton' },
			 { id: 'micro',     link: '/micro',     text: 'Micro' },
			 { id: 'spectrum',  link: '/spectrum',  text: 'Spectrum' },
			 { id: 'contact',   link: '/contact',   text: 'Contact' }
		 ]);
	 %>
	 <% this.copyright() %>
</div>
</~method>

<~init>
	this.stylesheetPath = '/style.css';
</~init>